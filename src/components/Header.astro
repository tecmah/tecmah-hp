---
const LOGO = {
  default: "/images/logo/logo-horizontal.svg",
  dark: "/images/logo/logo-horizontal-dark.svg",
  fallback: "/images/logo/logo-horizontal.png",
  mobile: "/images/logo/logo-horizontal-mobile.svg",
};
// Header component - OpenAI風ナビゲーション
---

<header
  class="fixed top-0 left-0 right-0 z-50 bg-zinc-900/90 backdrop-blur-md border-b border-zinc-700"
>
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center" aria-label="TECMAH ホーム">
          <picture class="logo-picture" data-logo-mode="dynamic">
            <source
              srcset={LOGO.dark}
              media="(prefers-color-scheme: dark) and (min-width: 768px)"
              type="image/svg+xml"
            />
            <source
              srcset={LOGO.dark}
              media="(prefers-color-scheme: dark)"
              type="image/svg+xml"
            />
            <source
              srcset={LOGO.mobile}
              media="(max-width: 767px)"
              type="image/svg+xml"
            />
            <source srcset={LOGO.default} type="image/svg+xml" />
            <img
              src={LOGO.fallback}
              alt="TECMAH"
              class="logo"
              width="200"
              height="48"
              loading="eager"
              decoding="async"
            />
          </picture>
          <span class="sr-only">TECMAH</span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-8">
        <!-- Home Version Selector -->
        <div class="relative home-version-selector group">
          <button
            type="button"
            class="text-gray-300 hover:text-white px-3 py-2 text-sm font-medium transition-colors flex items-center gap-1"
            aria-expanded="false"
            aria-haspopup="true"
            id="home-version-button"
          >
            ホーム
            <svg class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div
            class="home-version-dropdown hidden absolute top-full left-0 mt-2 w-48 bg-zinc-800 rounded-lg shadow-xl border border-zinc-700 py-2 z-50"
            id="home-version-dropdown"
          >
            <a
              href="/"
              class="block px-4 py-2 text-sm text-gray-300 hover:bg-zinc-700 hover:text-white transition-colors"
            >
              <span class="flex items-center justify-between">
                <span>デフォルト</span>
                <span class="text-xs text-gray-500">現在</span>
              </span>
            </a>
            <a
              href="/index-01"
              class="block px-4 py-2 text-sm text-gray-300 hover:bg-zinc-700 hover:text-white transition-colors"
            >
              <span class="flex items-center justify-between">
                <span>バージョン01</span>
                <span class="text-xs text-gray-500">ライト</span>
              </span>
            </a>
            <a
              href="/index-02"
              class="block px-4 py-2 text-sm text-gray-300 hover:bg-zinc-700 hover:text-white transition-colors"
            >
              <span class="flex items-center justify-between">
                <span>バージョン02</span>
                <span class="text-xs text-gray-500">グラデーション</span>
              </span>
            </a>
            <a
              href="/index-03"
              class="block px-4 py-2 text-sm text-gray-300 hover:bg-zinc-700 hover:text-white transition-colors"
            >
              <span class="flex items-center justify-between">
                <span>バージョン03</span>
                <span class="text-xs text-gray-500">ニューモーフィズム</span>
              </span>
            </a>
          </div>
        </div>
        <a
          href="/services"
          class="text-gray-300 hover:text-white px-3 py-2 text-sm font-medium transition-colors"
        >
          サービス
        </a>
        <a
          href="/about"
          class="text-gray-300 hover:text-white px-3 py-2 text-sm font-medium transition-colors"
        >
          会社概要
        </a>
        <a
          href="/case-studies"
          class="text-gray-300 hover:text-white px-3 py-2 text-sm font-medium transition-colors"
        >
          事例
        </a>
        <a href="/contact" class="btn btn-primary text-sm"> 無料相談 </a>
      </div>

      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button
          type="button"
          class="mobile-menu-button inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-300 hover:bg-zinc-800"
          aria-controls="mobile-menu"
          aria-expanded="false"
        >
          <span class="sr-only">メニューを開く</span>
          <!-- Hamburger icon -->
          <svg
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile menu -->
    <div class="mobile-menu hidden md:hidden">
      <div
        class="px-2 pt-2 pb-3 space-y-1 bg-zinc-900 border-t border-zinc-700"
      >
        <div class="border-b border-zinc-700 pb-2 mb-2">
          <div class="px-3 py-2 text-base font-medium text-gray-400">ホーム</div>
          <a
            href="/"
            class="block px-6 py-2 text-sm text-gray-300 hover:text-white hover:bg-zinc-800"
          >
            デフォルト
          </a>
          <a
            href="/index-01"
            class="block px-6 py-2 text-sm text-gray-300 hover:text-white hover:bg-zinc-800"
          >
            バージョン01（ライト）
          </a>
          <a
            href="/index-02"
            class="block px-6 py-2 text-sm text-gray-300 hover:text-white hover:bg-zinc-800"
          >
            バージョン02（グラデーション）
          </a>
          <a
            href="/index-03"
            class="block px-6 py-2 text-sm text-gray-300 hover:text-white hover:bg-zinc-800"
          >
            バージョン03（ニューモーフィズム）
          </a>
        </div>
        <a
          href="/services"
          class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-zinc-800"
        >
          サービス
        </a>
        <a
          href="/about"
          class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-zinc-800"
        >
          会社概要
        </a>
        <a
          href="/case-studies"
          class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-zinc-800"
        >
          事例
        </a>
        <a href="/contact" class="block mx-3 my-2 text-center btn btn-primary">
          無料相談
        </a>
      </div>
    </div>
  </nav>
</header>

<script>
  // Mobile menu toggle
  document.addEventListener("DOMContentLoaded", function () {
    const mobileMenuButton = document.querySelector(".mobile-menu-button");
    const mobileMenu = document.querySelector(".mobile-menu");

    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener("click", function () {
        const isExpanded =
          mobileMenuButton.getAttribute("aria-expanded") === "true";

        mobileMenuButton.setAttribute(
          "aria-expanded",
          (!isExpanded).toString()
        );
        mobileMenu.classList.toggle("hidden");
      });
    }

    // Close mobile menu when clicking outside
    document.addEventListener("click", function (event) {
      if (
        mobileMenu &&
        !mobileMenu.contains(event.target) &&
        !mobileMenuButton?.contains(event.target)
      ) {
        mobileMenu.classList.add("hidden");
        mobileMenuButton?.setAttribute("aria-expanded", "false");
      }
    });

    // Home version dropdown toggle
    const homeVersionButton = document.getElementById("home-version-button");
    const homeVersionDropdown = document.getElementById("home-version-dropdown");
    const homeVersionArrow = homeVersionButton?.querySelector("svg");

    if (homeVersionButton && homeVersionDropdown) {
      homeVersionButton.addEventListener("click", function (event) {
        event.stopPropagation();
        const isExpanded = homeVersionButton.getAttribute("aria-expanded") === "true";
        
        homeVersionButton.setAttribute("aria-expanded", (!isExpanded).toString());
        homeVersionDropdown.classList.toggle("hidden");
        
        if (homeVersionArrow) {
          homeVersionArrow.classList.toggle("rotate-180");
        }
      });

      // Close dropdown when clicking outside
      document.addEventListener("click", function (event) {
        if (
          homeVersionDropdown &&
          !homeVersionDropdown.contains(event.target) &&
          !homeVersionButton?.contains(event.target)
        ) {
          homeVersionDropdown.classList.add("hidden");
          homeVersionButton?.setAttribute("aria-expanded", "false");
          if (homeVersionArrow) {
            homeVersionArrow.classList.remove("rotate-180");
          }
        }
      });

      // Highlight current version
      const currentPath = window.location.pathname;
      const dropdownLinks = homeVersionDropdown.querySelectorAll("a");
      dropdownLinks.forEach((link) => {
        if (link.getAttribute("href") === currentPath) {
          link.classList.add("bg-zinc-700", "text-white");
          link.querySelector("span.text-xs").textContent = "✓ 現在";
        }
      });
    }
  });
</script>

<style>
  /* ヘッダー固有のスタイル */
  header {
    transition: all 0.3s ease;
  }

  /* スクロール時の効果 */
  .scrolled {
    background-color: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  /* Logo hover effect */
  .logo:hover {
    transform: scale(1.05);
    transition: transform 0.2s ease;
  }

  .logo {
    width: clamp(120px, 15vw, 200px);
    height: auto;
    transition: filter 0.3s ease;
  }

  /* ライトモード時のロゴ調整 */
  @media (prefers-color-scheme: light) {
    .logo {
      filter: brightness(0) invert(0.2);
    }

    .logo-picture[data-logo-mode="dynamic"] .logo {
      filter: none;
    }
  }

  @media (prefers-color-scheme: dark) {
    .logo {
      filter: brightness(0) invert(1);
    }

    .logo-picture[data-logo-mode="dynamic"] .logo {
      filter: none;
    }
  }

  /* Home version selector */
  .home-version-selector:hover .home-version-dropdown {
    display: block;
  }

  .home-version-dropdown {
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
