---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import PageHero from '../components/PageHero.astro';
import CTASection from '../components/CTASection.astro';

const badgeIcon = `<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>`;

// Case studies data
const caseStudies = [
  {
    id: 'education-saas',
    title: '教育SaaS企業',
    subtitle: '生成AIアダプティブ学習システム',
    industry: '教育',
    company_size: 'スタートアップ（従業員50名）',
    project_period: '6ヶ月',
    team_size: '3名',
    tags: ['生成AI', 'データ分析', 'EdTech'],
    results: [
      { metric: '学習継続率', value: '+18%' },
      { metric: 'ユーザー満足度', value: '4.7/5.0' },
      { metric: '導入期間', value: '3ヶ月' }
    ],
    overview: '既存の学習プラットフォームに生成AIを活用したアダプティブ学習機能を統合し、学習者一人ひとりに最適化された学習体験を実現しました。'
  },
  {
    id: 'manufacturing-audio',
    title: '製造業',
    subtitle: '音声解析による異常検知システム',
    industry: '製造業',
    company_size: '中堅企業（従業員300名）',
    project_period: '9ヶ月',
    team_size: '4名',
    tags: ['音声AI', '異常検知', '製造DX'],
    results: [
      { metric: '判定時間', value: '50%短縮' },
      { metric: '検知精度', value: '95%' },
      { metric: 'コスト削減', value: '年間500万円' }
    ],
    overview: '製造現場の音声データから異常を自動検知するシステムを構築。既存の製造管理システムと統合し、リアルタイムでの異常通知を実現しました。'
  },
  {
    id: 'retail-ai',
    title: '小売×生成AI',
    subtitle: 'RAG構成インタラクティブミラー',
    industry: '小売業',
    company_size: '大手企業（従業員1,000名）',
    project_period: '4ヶ月',
    team_size: '5名',
    tags: ['生成AI', 'RAG', '小売DX'],
    results: [
      { metric: 'パイロット導入', value: '3ヶ月' },
      { metric: '顧客満足度', value: '92%' },
      { metric: '商品認知率', value: '+35%' }
    ],
    overview: '店舗に設置されたインタラクティブミラーで、顧客の質問に対してAIが商品情報やコーディネート提案をリアルタイムで提供するシステムを開発しました。'
  },
  {
    id: 'ai-startup',
    title: 'AIスタートアップ',
    subtitle: '新規事業の事業性検証・投資判断支援',
    industry: 'IT・AI',
    company_size: 'スタートアップ（従業員20名）',
    project_period: '6ヶ月',
    team_size: '2名',
    tags: ['新規事業', '市場調査', 'PoC開発'],
    results: [
      { metric: '投資判断材料', value: '100%整備' },
      { metric: 'PoC成功', value: '技術検証完了' },
      { metric: '市場規模', value: '300億円' }
    ],
    overview: 'AIスタートアップの新規サービスについて、市場調査・競合分析・技術PoC・事業計画策定を包括的に支援し、投資判断に必要な材料を整備しました。'
  }
];

const industries = [...new Set(caseStudies.map(study => study.industry))];
---

<Layout title="導入事例・成功事例 | 株式会社TECMAH - AI・データ活用支援実績">
  <Header />
  <main>
    <PageHero
      titleHtml='<span class="gradient-text">実績</span>が<br><span class="gradient-text">証明</span>する価値'
      subtitleHtml="様々な業界・規模の企業様でのAI・データ活用、<br>プロダクトマネジメント支援の成功事例をご紹介します。"
      badge="導入事例・成功事例"
      badgeIconHtml={badgeIcon}
    />

    <!-- Filter & Stats -->
    <section class="filter-section">
      <div class="container">
        <div class="filter-content">
          <!-- Filter -->
          <div class="filter-group">
            <span class="filter-label">業界絞り込み:</span>
            <div class="filter-buttons">
              <button class="filter-btn active" data-filter="all">すべて</button>
              {industries.map(industry => (
                <button class="filter-btn" data-filter={industry}>{industry}</button>
              ))}
            </div>
          </div>

          <!-- Stats -->
          <div class="stats-group">
            <div class="stat-item">
              <div class="stat-value">{caseStudies.length}+</div>
              <div class="stat-label">支援実績</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">95%</div>
              <div class="stat-label">満足度</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">6ヶ月</div>
              <div class="stat-label">平均導入期間</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Case Studies Grid -->
    <section class="section">
      <div class="container">
        <div class="case-studies-grid" id="case-studies-grid">
          {caseStudies.map((study) => (
            <article class="case-card" data-industry={study.industry}>
              <!-- Header -->
              <div class="case-header">
                <div class="case-tags">
                  {study.tags.map(tag => (
                    <span class="case-tag">{tag}</span>
                  ))}
                </div>
                <h3 class="case-title">{study.title}</h3>
                <p class="case-subtitle">{study.subtitle}</p>
              </div>

              <!-- Content -->
              <div class="case-content">
                <p class="case-overview">{study.overview}</p>

                <!-- Results -->
                <div class="case-results">
                  {study.results.slice(0, 3).map(result => (
                    <div class="result-item">
                      <div class="result-value">{result.value}</div>
                      <div class="result-metric">{result.metric}</div>
                    </div>
                  ))}
                </div>

                <!-- Meta -->
                <div class="case-meta">
                  <div class="meta-row">
                    <span class="meta-label">業界:</span>
                    <span class="meta-value">{study.industry}</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">企業規模:</span>
                    <span class="meta-value">{study.company_size}</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">期間:</span>
                    <span class="meta-value">{study.project_period}</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">体制:</span>
                    <span class="meta-value">{study.team_size}</span>
                  </div>
                </div>

                <!-- CTA -->
                <a href={`/case-studies/${study.id}`} class="case-link">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                  詳細を見る
                </a>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>

    <CTASection
      titleHtml="あなたの課題も<br>解決できるかもしれません"
      subtitleHtml="初回60分のオンライン相談は無料です。<br>似たような課題をお持ちでしたら、お気軽にご相談ください。"
      primaryText="無料相談を予約する"
      primaryHref="/contact"
      secondaryText="サービスを見る"
      secondaryHref="/services"
    />
  </main>
  <Footer />
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const filterButtons = document.querySelectorAll('.filter-btn');
    const caseCards = document.querySelectorAll('.case-card');

    filterButtons.forEach(button => {
      button.addEventListener('click', function() {
        const filter = this.getAttribute('data-filter');

        filterButtons.forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');

        caseCards.forEach(card => {
          if (filter === 'all' || card.getAttribute('data-industry') === filter) {
            card.style.display = 'flex';
            card.classList.add('fade-in');
          } else {
            card.style.display = 'none';
            card.classList.remove('fade-in');
          }
        });
      });
    });
  });
</script>

<style>
  /* Filter Section */
  .filter-section {
    padding: 2rem 0;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
  }

  .filter-content {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  @media (min-width: 1024px) {
    .filter-content {
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    }
  }

  .filter-group {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
  }

  .filter-label {
    font-weight: 600;
    color: var(--text);
    font-size: 0.9375rem;
  }

  .filter-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .filter-btn {
    padding: 0.5rem 1rem;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
    background: var(--surface-light);
    color: var(--text-secondary);
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all var(--motion-duration) var(--motion-ease);
  }

  .filter-btn:hover {
    background: var(--surface-lighter);
    color: var(--text);
    border-color: var(--border-hover);
  }

  .filter-btn.active {
    background: var(--gradient-secondary);
    color: white;
    border-color: transparent;
  }

  .stats-group {
    display: flex;
    gap: 2rem;
  }

  .stat-item {
    text-align: center;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
  }

  .stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Case Studies Grid */
  .case-studies-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  @media (min-width: 1024px) {
    .case-studies-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* Case Card */
  .case-card {
    display: flex;
    flex-direction: column;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-xl);
    overflow: hidden;
    transition: all var(--motion-duration) var(--motion-ease);
  }

  .case-card:hover {
    transform: translateY(-4px);
    border-color: var(--border-hover);
    box-shadow: var(--shadow-xl);
  }

  .case-header {
    padding: 2rem;
    background: linear-gradient(135deg, rgba(99, 91, 255, 0.1), rgba(0, 212, 170, 0.1));
    border-bottom: 1px solid var(--border);
  }

  .case-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }

  .case-tag {
    padding: 0.25rem 0.75rem;
    background: rgba(0, 212, 170, 0.15);
    color: var(--primary);
    border-radius: var(--radius-full);
    font-size: 0.75rem;
    font-weight: 500;
  }

  .case-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 0.5rem;
  }

  .case-subtitle {
    color: var(--text-secondary);
    font-size: 1rem;
  }

  .case-content {
    padding: 2rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .case-overview {
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .case-results {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    padding: 1.5rem;
    background: var(--surface-light);
    border-radius: var(--radius-lg);
    margin-bottom: 1.5rem;
  }

  .result-item {
    text-align: center;
  }

  .result-value {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.25rem;
  }

  .result-metric {
    font-size: 0.75rem;
    color: var(--text-muted);
  }

  .case-meta {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
    margin-bottom: 1.5rem;
  }

  .meta-row {
    font-size: 0.875rem;
  }

  .meta-label {
    color: var(--text-muted);
  }

  .meta-value {
    color: var(--text);
    margin-left: 0.5rem;
  }

  .case-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    background: var(--gradient-secondary);
    color: white;
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.9375rem;
    transition: all var(--motion-duration) var(--motion-ease);
    margin-top: auto;
  }

  .case-link:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg), var(--shadow-glow-secondary);
  }

  /* Animation */
  .fade-in {
    animation: fadeInUp 0.5s var(--motion-ease) forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .case-card,
    .case-link,
    .filter-btn {
      transition: none;
    }

    .case-card:hover,
    .case-link:hover {
      transform: none;
    }

    .fade-in {
      animation: none;
    }
  }
</style>
