/* Enhanced Japanese font support CSS - Maximum compatibility and coverage */

/* Define comprehensive Japanese font fallbacks with system fonts */
@font-face {
  font-family: 'Japanese-System-Fallback';
  src: local('Yu Gothic UI'), 
       local('Yu Gothic'), 
       local('Hiragino Kaku Gothic ProN'), 
       local('Hiragino Kaku Gothic Pro'), 
       local('ヒラギノ角ゴ ProN'), 
       local('メイリオ'), 
       local('Meiryo'), 
       local('MS Pゴシック'), 
       local('MS PGothic'), 
       local('MS ゴシック'), 
       local('MS Gothic');
  font-display: swap;
  unicode-range: U+3040-309F, U+30A0-30FF, U+4E00-9FAF, U+FF00-FFEF;
}

/* Comprehensive Japanese font stack - covers all possible scenarios */
:root {
  --japanese-font-stack: 'Noto Sans JP', 'Japanese-System-Fallback', 'Yu Gothic UI', 'Yu Gothic', 'Hiragino Kaku Gothic ProN', 'Hiragino Kaku Gothic Pro', 'ヒラギノ角ゴ ProN', 'メイリオ', 'Meiryo', 'MS Pゴシック', 'MS PGothic', 'MS ゴシック', 'MS Gothic', sans-serif;
}

/* Universal font override with maximum specificity */
html, body, *, *::before, *::after {
  font-family: var(--japanese-font-stack) !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: optimizeLegibility !important;
}

/* Specific overrides for all possible elements and theme classes */
h1, h2, h3, h4, h5, h6,
p, span, div, a, li, ul, ol, dl, dt, dd,
table, th, td, thead, tbody, tfoot,
button, input, select, textarea, label, legend, fieldset,
nav, header, footer, main, section, article, aside, figure, figcaption,
blockquote, cite, code, pre, kbd, samp, var,
small, strong, em, i, b, u, s, mark, del, ins, sub, sup,
time, abbr, acronym, address,
/* Theme-specific selectors */
.logo, .logo *,
#header, #header *, .header, .header *,
#menu, #menu *, .menu, .menu *, .navigation, .navigation *, .nav, .nav *,
#banner, #banner *, .banner, .banner *, .hero, .hero *,
#main, #main *, .main, .main *,
.tiles, .tiles *, .tile, .tile *,
.spotlights, .spotlights *, .spotlight, .spotlight *,
.content, .content *, .text, .text *, .description, .description *,
.inner, .inner *, .wrapper, .wrapper *, .container, .container *,
.major, .major *, .minor, .minor *,
.box, .box *, .card, .card *,
#footer, #footer *, .footer, .footer *,
.button, .button *, .btn, .btn *,
.title, .title *, .subtitle, .subtitle *, .lead, .lead *,
.section, .section *, .row, .row *, .col, .col *,
.grid, .grid *, .flex, .flex *,
/* Common CSS framework classes */
.h1, .h2, .h3, .h4, .h5, .h6,
.text-primary, .text-secondary, .text-success, .text-danger, .text-warning, .text-info, .text-light, .text-dark, .text-muted,
.bg-primary, .bg-secondary, .bg-success, .bg-danger, .bg-warning, .bg-info, .bg-light, .bg-dark,
.navbar, .navbar *, .nav-item, .nav-link, .dropdown, .dropdown *,
.jumbotron, .jumbotron *, .alert, .alert *, .modal, .modal *,
.form-control, .form-group, .form-label, .form-text,
/* Forty theme specific */
.site-header, .site-header *,
.site-nav, .site-nav *,
.site-title, .site-title *,
.post-title, .post-title *,
.post-content, .post-content *,
.post-meta, .post-meta *,
.page-title, .page-title *,
.page-content, .page-content * {
  font-family: var(--japanese-font-stack) !important;
}

/* Enhanced text rendering for Japanese characters */
body {
  font-feature-settings: "palt", "pkna" !important;
  -webkit-font-feature-settings: "palt", "pkna" !important;
  -moz-font-feature-settings: "palt", "pkna" !important;
  text-rendering: optimizeLegibility !important;
  -webkit-text-size-adjust: 100% !important;
  -moz-text-size-adjust: 100% !important;
  text-size-adjust: 100% !important;
}

/* Improved typography for Japanese text */
p, li, td, th, .content, .inner, .text, .description {
  line-height: 1.8 !important;
  word-break: break-word !important;
  overflow-wrap: break-word !important;
}

/* Enhanced headings for Japanese text */
h1, h2, h3, h4, h5, h6 {
  font-weight: 500 !important;
  letter-spacing: -0.02em !important;
  line-height: 1.4 !important;
  word-break: keep-all !important;
  overflow-wrap: break-word !important;
}

/* Specific improvements for hero/banner sections */
#hero h1, #banner h1, .hero h1, .banner h1 {
  font-weight: 700 !important;
  letter-spacing: -0.03em !important;
  line-height: 1.2 !important;
}

#hero .lead, #banner .lead, .hero .lead, .banner .lead {
  font-weight: 400 !important;
  font-size: 1.2em !important;
  line-height: 1.8 !important;
}

/* Ensure proper display for Japanese punctuation and symbols */
.jp-text, [lang="ja"], [lang="jp"] {
  font-variant-east-asian: proportional-width !important;
  -webkit-font-variant-ligatures: common-ligatures !important;
  font-variant-ligatures: common-ligatures !important;
}

/* Fix for buttons and interactive elements */
button, .button, .btn, input[type="submit"], input[type="button"] {
  font-family: var(--japanese-font-stack) !important;
  font-weight: 500 !important;
}

/* Navigation and menu specific fixes */
nav, .navigation, .nav, .menu {
  font-family: var(--japanese-font-stack) !important;
}

nav a, .navigation a, .nav a, .menu a {
  font-family: var(--japanese-font-stack) !important;
  font-weight: 500 !important;
}

/* Table formatting for Japanese content */
table {
  font-family: var(--japanese-font-stack) !important;
}

th, td {
  font-family: var(--japanese-font-stack) !important;
  line-height: 1.6 !important;
}

/* Form elements */
input, textarea, select {
  font-family: var(--japanese-font-stack) !important;
}

/* Ensure code blocks also use appropriate fonts when containing Japanese */
code, pre {
  font-family: 'Noto Sans Mono CJK JP', 'Source Code Pro', 'Courier New', monospace !important;
}

/* Media queries for different screen sizes */
@media screen and (max-width: 768px) {
  body {
    font-size: 16px !important;
    line-height: 1.7 !important;
  }
  
  h1, h2, h3 {
    line-height: 1.3 !important;
  }
}

/* Print styles for Japanese text */
@media print {
  * {
    font-family: 'Yu Gothic', 'Hiragino Kaku Gothic Pro', 'Meiryo', serif !important;
  }
}